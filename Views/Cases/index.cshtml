@using disease_outbreaks_detector.Models

@{
    var record = ViewBag.Record as CaseRecord;
    var country = ViewBag.Country as string;
    var error = ViewBag.Error as string;
}
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Disease Outbreaks Monitor</title>

    <link rel="stylesheet" href="~/Styles/HomePage.css" />
    <link href="https://fonts.googleapis.com/css2?family=Familjen+Grotesk&display=swap" rel="stylesheet">
</head>

<body>
    <header>   
        <div class="nav-upper-panel">
            <a>Disease Outbreaks Monitor</a>
        </div>
        <span class="bottom-header-line" /> 
    </header>

    <div class="container">
        <h1>COVID-19 Data for @country</h1>

        @if (!string.IsNullOrEmpty(error))
        {
            <div class="alert alert-warning">@error</div>
        }
        else if (record != null)
        {
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Cases</h3>
                    <p>@(record.Cases > 0 ? record.Cases.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Today Cases</h3>
                    <p>@(record.TodayCases > 0 ? record.TodayCases.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Deaths</h3>
                    <p>@(record.Deaths > 0 ? record.Deaths.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Today Deaths</h3>
                    <p>@(record.TodayDeaths > 0 ? record.TodayDeaths.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Recovered</h3>
                    <p>@(record.Recovered > 0 ? record.Recovered.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Today Recovered</h3>
                    <p>@(record.TodayRecovered > 0 ? record.TodayRecovered.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Population</h3>
                    <p>@(record.population > 0 ? record.population.ToString("N0") : "N/A")</p>
                </div>
                <div class="stat-card">
                    <h3>Updated</h3>
                    <p>@record.UpdatedAt.ToShortDateString()</p>
                </div>
            </div>
        }
        else
        {
            <div class="alert alert-info">Loading data... If error, check console.</div>
        }

        <form asp-action="Index" method="get">
            <label for="country">Search by country:</label>
            <input type="text" id="country" name="country" value="@country" placeholder="e.g., Ukraine" />
            <button type="submit">Fetch Data</button>
        </form>
    </div>

    <div class="worldmap-container"></div>
</body>
